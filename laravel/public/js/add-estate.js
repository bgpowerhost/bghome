function hideElements() {	$('.show_elements').show();}$('html').bind('keypress', function(e){   if(e.keyCode == 13)   {      return false;   }});window.onload = hideElements;function setCategory(value){	if(value == 'sale') {		if($('.type_id input:radio:checked').is(':checked')) {			setType($('.type_id input:radio:checked').val());		}		$('.show_type').show();	} else {		if(value == 'rental') {			if($('.type_id input:radio:checked').is(':checked')) {				setType($('.type_id input:radio:checked').val());			}			$('.show_type').show();		} else if(value == 'accommodation') {			setType($('.type_id input:radio:checked').val());			$('.show_type').hide();		}	}	//console.log(value);}function setLatLon () {	lat = parseFloat($('#lat_hidd').val());	lng = parseFloat($('#lon_hidd').val());	lat_lng = {lat:lat, lng:lng};	console.log(lat_lng);	initMap(lat_lng);}function cutString(value, length = 6) {	string = value;	trimmedString = jQuery.trim(string).substring(0, length);	return trimmedString;}function setType(value) {	type = value;	category = $('#category label input:radio:checked').val();	console.log('category is '+ category + ' and type is '+ type);	$.ajax({		type: 'POST',		url: 'get-parameters',		data: {type:type, category:category}	}).done(function(result){		$('#parameters-list').html(result);		if($(".type_id input:radio").is(":checked") && $('#category input:radio:checked').val()!= 'accommodation') {			$('.show_elements').show();		}	});}function setRegion(value, polygon = true, city_selected = null) {	//console.log(document.getElementById('city_id').options[0].value == null);		$.ajax({			type: 'POST',			url: 'get-cities',			data: {region_id:value}		}).done(function(result){			if(polygon == true) {				deleteMarkers();				$.ajax({					type: 'GET',					url: 'https://maps.googleapis.com/maps/api/geocode/json?address='+result.region_name,				}).done(function(google_map){					lat_lng = google_map.results[0].geometry.location;					map = initMap(lat_lng);						area_name = google_map.results[0].address_components[1].long_name;						area_name =  area_name.replace(" ","-");						var kmzLayer = new google.maps.KmlLayer('http://bghome.phpsourcecode.info/public/areas/'+area_name+'.kmz');						kmzLayer.setMap(map);					//addMarker(lat_lng);				});			}			var cities = [];			for (var key in result.city_option) {				if (result.city_option.hasOwnProperty(key)) {					if(result.city_option[key].match(city_selected)) {						selected = 'selected';					} else {						selected = '';					}					cities.push('<option '+selected+' value="'+key+'">'+result.city_option[key]+'</option>');				}			}			$('.city_id').html(cities.toString());			setNeighborhoods(document.getElementById('city_id').value, city_selected);		});}function setCity(city_id, region_id) {	//console.log(city_id, region_id);	$.ajax({		type: 'GET',		url: 'https://maps.googleapis.com/maps/api/geocode/json?address='+city_id+region_id,	}).done(function(google_map){		lat_lng = google_map.results[0].geometry.location;		initMap(lat_lng);		//addMarker(lat_lng);	});}function setNeighborhoods(city_id, neighborhood = null) {	$.ajax({		type: 'POST',		url: 'get-neighborhoods',		data: {city_id:city_id}	}).done(function(result){		var neighborhoods = [];		for (var key in result.neighborhoods_option) {			if (result.neighborhoods_option.hasOwnProperty(key)) {				regex = new RegExp("(.*) ", "gi");				if(result.neighborhoods_option[key].match(neighborhood)) {					selected = 'selected';				} else {					selected = '';				}				neighborhoods.push('<option '+selected+' value="'+key+'">'+result.neighborhoods_option[key]+'</option>');				console.log(/abc/.test(neighborhood));			}		}		$('.neighborhood_id').html(neighborhoods.toString());	});}function setBasement(value) {	if(value == 'yes') {		document.getElementById("basement").innerHTML = "<input onblur=\"setBasement(this.value)\" name=\"basement\" style=\"width:90px\" type=\"text\">m/2";	} else {		if(value == '') {			document.getElementById("basement").innerHTML = "<select name=\"land\" onchange=\"setBasement(this.value)\" ><option value=\"\">{{Lang::get('master.choose')}}</option><option value=\"yes\">{{Lang::get('master.yes')}}</option><option value=\"no\">{{Lang::get('master.no')}}</option></select>";		}	}}function setLand(value) {	if(value == 'yes') {		document.getElementById("land").innerHTML = "<input onblur=\"setLand(this.value)\" name=\"land\" style=\"width:90px\" type=\"text\">m/2";	} else {		if(value == '') {			document.getElementById("land").innerHTML = "<select name=\"land\" onchange=\"setLand(this.value)\" ><option value=\"\">{{Lang::get('master.choose')}}</option><option value=\"yes\">{{Lang::get('master.yes')}}</option><option value=\"no\">{{Lang::get('master.no')}}</option></select>";		}	}}function setCeiling(value) {	if(value == 'yes') {		document.getElementById("ceiling").innerHTML = "<input onblur=\"setCeiling(this.value)\" name=\"ceiling\" style=\"width:90px\" type=\"text\">m/2";	} else {		if(value == '') {			document.getElementById("ceiling").innerHTML = "<select name=\"ceiling\" onchange=\"setCeiling(this.value)\" ><option value=\"\">{{Lang::get('master.choose')}}</option><option value=\"yes\">{{Lang::get('master.yes')}}</option><option value=\"no\">{{Lang::get('master.no')}}</option></select>";		}	}}function setCommonParts(value) {	if(value == 'yes') {		document.getElementById("common_parts").innerHTML = "<input name=\"common_parts\" onblur=\"setCommonParts(this.value)\" style=\"width:90px\" type=\"text\">m/2";	} else {		if(value == '') {			document.getElementById("common_parts").innerHTML = "<select name=\"common_parts\" onchange=\"setCommonParts(this.value)\" ><option value=\"\">{{Lang::get('master.choose')}}</option><option value=\"yes\">{{Lang::get('master.yes')}}</option><option value=\"no\">{{Lang::get('master.no')}}</option></select>";		}	}}function setGarage(value) {	if(value == 'yes') {		document.getElementById("garage").innerHTML = "<input name=\"garage\" onblur=\"setGarage(this.value)\" style=\"width:90px\" type=\"text\">m/2";	} else {		if(value == '') {			document.getElementById("garage").innerHTML = "<select name=\"garage\" onchange=\"setGarage(this.value)\" ><option value=\"\">{{Lang::get('master.choose')}}</option><option value=\"yes\">{{Lang::get('master.yes')}}</option><option value=\"no\">{{Lang::get('master.no')}}</option></select>";		}	}}// function setType(value) {	// type = value;	// if(value == '1') {		// type= 'land_parameters';	// }else {		// if(value == '2') {			// type= 'estate_parameters';		// } else {			// if(value == '3') {				// type= 'accommodation_parameters';			// } else {				// if(type == '4') {					// type= 'rental_parameters';				// }			// }		// }	// }	// if($('#category input:radio:checked').val() == 'rental' && value != 1) {		// type = 'rental_parameters';	// } else {		// if($('#category input:radio:checked').val() == 'rental' && value == 1) {			// type = 'land_parameters';		// }	// }	// $.ajax({		// type: 'GET',		// url: 'get-parameters',		// data: {type:type}	// }).done(function(result){		// $('#parameters-list').html(result);		// if($(".type_id input:radio").is(":checked") && $('#category input:radio:checked').val()!= 'accommodation') {			// $('.show_elements').show();		// }	// });// }function IsJsonString(str) {    try {        JSON.parse(str);    } catch (e) {        return false;    }    return true;}function UploadFile() {					var file_data = $("#csv_file").prop("files")[0];   		var form_data = new FormData();                  		form_data.append("csv_file", file_data)		alert(form_data);                             		$.ajax({					url: "/upload-csv",					dataType: 'script',					cache: false,					contentType: false,					processData: false,					data: form_data,                         					type: 'post',		 }).done(function(e){			setCSVtoHTML(e);		 });}var position =1;function addRow() {	data = position++;	row = $('.prototype').html();	$('#dynatable').append('<tr class="prototype_'+data+'">'+row+'<td><button onclick="deleteRow(\'prototype_'+data+'\')" class="btn btn-danger remove rbutton" type="button" id="remove" value="" name="Изтриване"><I class="fa fa-trash-o"></i></button></td></tr>');}function deleteRow(name) {	$('.'+name).html('');}